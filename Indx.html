<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GSSS Jahu - Cloud Portal</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --primary: #0ea5e9;
    --dark: #0f172a;
    --card: #1e293b;
    --text: #f1f5f9;
    --border: #334155;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
  body { min-height: 100vh; background: var(--dark); color: var(--text); display: flex; justify-content: center; padding: 15px; }
  .container { width: 100%; max-width: 900px; background: var(--card); border-radius: 20px; padding: 25px; border: 1px solid var(--border); }
  
  /* Views & Animation */
  .view { display: none; animation: fade 0.4s ease; }
  .view.active { display: block; }
  @keyframes fade { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

  h1 { text-align: center; color: var(--primary); font-size: 1.8rem; margin-bottom: 5px; }
  .subtitle { text-align: center; opacity: 0.6; margin-bottom: 30px; font-size: 0.9rem; }
  
  /* Menu */
  .menu-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; }
  .card { background: rgba(255,255,255,0.03); padding: 25px; border-radius: 15px; text-align: center; cursor: pointer; border: 1px solid var(--border); transition: 0.3s; }
  .card:hover { border-color: var(--primary); transform: translateY(-5px); }
  .icon { font-size: 2.5rem; display: block; margin-bottom: 10px; }

  /* Inputs */
  input, select, textarea { width: 100%; padding: 12px; margin-top: 8px; margin-bottom: 15px; background: #020617; border: 1px solid var(--border); color: white; border-radius: 8px; font-size: 1rem; outline: none; }
  input:focus, textarea:focus { border-color: var(--primary); }
  button { width: 100%; padding: 14px; background: var(--primary); color: #000; font-weight: 700; border: none; border-radius: 8px; cursor: pointer; transition: 0.2s; }
  button:hover { background: #38bdf8; }
  .btn-back { width: auto; background: var(--border); color: white; margin-bottom: 15px; }

  /* Tables */
  .table-box { overflow-x: auto; border: 1px solid var(--border); border-radius: 8px; }
  table { width: 100%; border-collapse: collapse; min-width: 500px; }
  th { background: #020617; position: sticky; top: 0; padding: 12px; text-align: left; color: var(--primary); border-bottom: 1px solid var(--border); }
  td { padding: 10px; border-bottom: 1px solid var(--border); }
  .roll-col { width: 60px; text-align: center; font-weight: bold; color: var(--primary); background: rgba(14, 165, 233, 0.05); }

  /* List Items */
  .history-item { background: rgba(255,255,255,0.03); padding: 15px; margin-bottom: 10px; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; border-left: 4px solid var(--border); }
  .history-item:hover { border-left-color: var(--primary); background: rgba(255,255,255,0.08); }
  
  /* Loading Overlay */
  #loader { position: fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); display:flex; justify-content:center; align-items:center; z-index:999; display:none; }
  .spinner { border: 4px solid #f3f3f3; border-top: 4px solid var(--primary); border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
  @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
</style>
</head>
<body>

<div id="loader"><div class="spinner"></div></div>

<div class="container">
  <h1>English Portal</h1>
  <p class="subtitle">GSSS Jahu ‚Ä¢ Cloud Database</p>

  <div id="view-home" class="view active">
    <div class="menu-grid">
      <div class="card" onclick="goTo('view-hw'); initStudentHw();">
        <span class="icon">üìÖ</span>
        <h3>Check Homework</h3>
      </div>
      <div class="card" onclick="goTo('view-marks');">
        <span class="icon">üìä</span>
        <h3>Check Marks</h3>
      </div>
      <div class="card" onclick="goTo('view-login')">
        <span class="icon">üîê</span>
        <h3>Admin Login</h3>
      </div>
    </div>
  </div>

  <div id="view-hw" class="view">
    <button class="btn-back" onclick="goTo('view-home')">‚¨Ö Back</button>
    <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
      <label>Select Date:</label>
      <input type="date" id="student-hw-date" onchange="fetchHomework(this.value)">
    </div>
    <h2>Homework for <span id="hw-date-display" style="opacity:0.7; font-size:1rem"></span></h2>
    <div id="hw-display" style="white-space: pre-wrap; background: #020617; padding: 20px; border-radius: 10px; border: 1px solid var(--border); min-height: 150px;">Loading...</div>
  </div>

  <div id="view-marks" class="view">
    <button class="btn-back" onclick="goTo('view-home')">‚¨Ö Back</button>
    <h2>Test History</h2>
    <div id="history-list">Loading tests from cloud...</div>
  </div>

  <div id="view-result" class="view">
    <button class="btn-back" onclick="goTo('view-marks')">‚¨Ö Back</button>
    <div style="text-align:center; margin-bottom:20px;">
      <h2 style="justify-content:center" id="res-title"></h2>
      <p style="opacity:0.7">Date: <span id="res-date"></span> | Max: <span id="res-max"></span></p>
    </div>
    <select onchange="renderResultTable(this.value)">
      <option value="">Select Stream</option>
      <option value="arts">Arts (201-230)</option>
      <option value="science">Science (251-277)</option>
      <option value="commerce">Commerce (286-305)</option>
    </select>
    <div class="table-box" id="res-table-box"></div>
  </div>

  <div id="view-login" class="view">
    <button class="btn-back" onclick="goTo('view-home')">‚¨Ö Back</button>
    <h2>Admin Login</h2>
    <input id="admin-user" placeholder="Username">
    <input id="admin-pass" type="password" placeholder="Password">
    <button onclick="login()">Access Dashboard</button>
  </div>

  <div id="view-admin" class="view">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
      <h2>Admin Panel</h2>
      <button class="btn-back" style="background:#ef4444; margin:0;" onclick="goTo('view-home')">Logout</button>
    </div>
    <div class="menu-grid">
      <div class="card" onclick="goTo('view-edit-hw'); initAdminHw();">
        <span class="icon">‚úèÔ∏è</span>
        <h3>Update Homework</h3>
      </div>
      <div class="card" onclick="goTo('view-add-marks'); resetEntry();">
        <span class="icon">üìù</span>
        <h3>Upload Marks
      
